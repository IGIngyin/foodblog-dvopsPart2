function cov_2py6695m2f(){var path="C:\\Users\\tashi\\foodblog\\foodblog-dvops-part2\\public\\js\\commentDisplay.js";var hash="e44349b68349e9835ebcbcb5a539b4c54d2c0f77";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\tashi\\foodblog\\foodblog-dvops-part2\\public\\js\\commentDisplay.js",statementMap:{"0":{start:{line:3,column:20},end:{line:3,column:62}},"1":{start:{line:4,column:4},end:{line:6,column:5}},"2":{start:{line:5,column:8},end:{line:5,column:56}},"3":{start:{line:57,column:4},end:{line:79,column:5}},"4":{start:{line:58,column:25},end:{line:58,column:63}},"5":{start:{line:61,column:25},end:{line:61,column:46}},"6":{start:{line:62,column:34},end:{line:62,column:79}},"7":{start:{line:63,column:8},end:{line:63,column:41}},"8":{start:{line:65,column:8},end:{line:75,column:11}},"9":{start:{line:67,column:12},end:{line:67,column:57}},"10":{start:{line:69,column:31},end:{line:69,column:60}},"11":{start:{line:70,column:12},end:{line:70,column:48}},"12":{start:{line:71,column:12},end:{line:73,column:34}},"13":{start:{line:74,column:12},end:{line:74,column:54}},"14":{start:{line:77,column:8},end:{line:77,column:56}},"15":{start:{line:78,column:8},end:{line:78,column:56}},"16":{start:{line:83,column:19},end:{line:83,column:24}},"17":{start:{line:88,column:25},end:{line:88,column:65}},"18":{start:{line:89,column:24},end:{line:89,column:49}},"19":{start:{line:90,column:26},end:{line:90,column:68}},"20":{start:{line:92,column:31},end:{line:92,column:32}},"21":{start:{line:95,column:4},end:{line:99,column:5}},"22":{start:{line:96,column:8},end:{line:96,column:42}},"23":{start:{line:98,column:8},end:{line:98,column:15}},"24":{start:{line:100,column:4},end:{line:104,column:5}},"25":{start:{line:101,column:8},end:{line:101,column:81}},"26":{start:{line:103,column:8},end:{line:103,column:15}},"27":{start:{line:107,column:4},end:{line:139,column:5}},"28":{start:{line:108,column:25},end:{line:112,column:10}},"29":{start:{line:126,column:8},end:{line:126,column:32}},"30":{start:{line:127,column:8},end:{line:127,column:35}},"31":{start:{line:128,column:8},end:{line:132,column:15}},"32":{start:{line:134,column:8},end:{line:134,column:54}}},fnMap:{"0":{name:"toggleSpinner",decl:{start:{line:2,column:9},end:{line:2,column:22}},loc:{start:{line:2,column:29},end:{line:10,column:1}},line:2},"1":{name:"loadComments",decl:{start:{line:56,column:15},end:{line:56,column:27}},loc:{start:{line:56,column:36},end:{line:80,column:1}},line:56},"2":{name:"(anonymous_2)",decl:{start:{line:65,column:25},end:{line:65,column:26}},loc:{start:{line:65,column:38},end:{line:75,column:9}},line:65},"3":{name:"addComment",decl:{start:{line:84,column:15},end:{line:84,column:25}},loc:{start:{line:84,column:34},end:{line:140,column:1}},line:84}},branchMap:{"0":{loc:{start:{line:4,column:4},end:{line:6,column:5}},type:"if",locations:[{start:{line:4,column:4},end:{line:6,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:4},"1":{loc:{start:{line:5,column:32},end:{line:5,column:55}},type:"cond-expr",locations:[{start:{line:5,column:39},end:{line:5,column:46}},{start:{line:5,column:49},end:{line:5,column:55}}],line:5},"2":{loc:{start:{line:95,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:99,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:95},"3":{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e44349b68349e9835ebcbcb5a539b4c54d2c0f77"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2py6695m2f=function(){return actualCoverage;};}return actualCoverage;}cov_2py6695m2f();// Toggle spinner visibility
function toggleSpinner(show){cov_2py6695m2f().f[0]++;const spinner=(cov_2py6695m2f().s[0]++,document.getElementById("loading-spinner"));cov_2py6695m2f().s[1]++;if(spinner){cov_2py6695m2f().b[0][0]++;cov_2py6695m2f().s[2]++;spinner.style.display=show?(cov_2py6695m2f().b[1][0]++,"block"):(cov_2py6695m2f().b[1][1]++,"none");}else{cov_2py6695m2f().b[0][1]++;}// else {
//     console.warn("Spinner element not found in the DOM.");
// }
}// Display an error message in the UI
// function displayErrorMessage(message) {
//     const errorMessage = document.getElementById("error-message");
//     if (!errorMessage) {
//         console.error("Error message element not found in the DOM.");
//         return;
//     }
//     errorMessage.textContent = message;
//     errorMessage.style.display = "block";
//     setTimeout(() => {
//         errorMessage.style.display = "none";
//     }, 5000);
// }
//Fetch and display post details
// async function loadPostDetails(postId) {
//     toggleSpinner(true);
//     try {
//         const response = await fetch(`/get-post/${postId}`);
//         // if (!response.ok) throw new Error("Failed to load post");
//         const post = await response.json();
//         document.getElementById("post-title").textContent = post.restaurantName;
//         document.getElementById("post-location").textContent = `Location: ${post.location}`;
//         document.getElementById("post-content").textContent = post.content;
//         const imageElement = document.getElementById("post-image");
//         imageElement.src =  "images/NoImag.jpg";
//         if (post.imageUrl) imageElement.src = post.imageUrl 
//         // imageElement.onerror = () => {
//         //     imageElement.src = "images/NoImage.jpg";
//         // };
//         await loadComments(postId);
//     } catch (error) {
//         //console.error("Error loading post details:", error);
//         //displayErrorMessage("Failed to load post details.");
//     } finally {
//         toggleSpinner(false);
//     }
// }
// Load comments for a post
async function loadComments(postId){cov_2py6695m2f().f[1]++;cov_2py6695m2f().s[3]++;try{const response=(cov_2py6695m2f().s[4]++,await fetch(`/get-comments/${postId}`));// if (!response.ok) throw new Error("Failed to load comments");
const comments=(cov_2py6695m2f().s[5]++,await response.json());const commentsContainer=(cov_2py6695m2f().s[6]++,document.getElementById("comments-container"));cov_2py6695m2f().s[7]++;commentsContainer.innerHTML="";// Clear previous comments
cov_2py6695m2f().s[8]++;comments.forEach(comment=>{cov_2py6695m2f().f[2]++;cov_2py6695m2f().s[9]++;// if (!comment.text) comment.text = "[No comment provided]";
comment.timestamp=new Date().toISOString();const commentDiv=(cov_2py6695m2f().s[10]++,document.createElement("div"));cov_2py6695m2f().s[11]++;commentDiv.classList.add("comment");cov_2py6695m2f().s[12]++;commentDiv.textContent=`${comment.text} (Posted on: ${new Date(comment.timestamp).toLocaleString()})`;cov_2py6695m2f().s[13]++;commentsContainer.appendChild(commentDiv);});}catch(error){cov_2py6695m2f().s[14]++;console.error("Error loading comments:",error);cov_2py6695m2f().s[15]++;displayErrorMessage("Failed to load comments.");}}// Add a new comment
let isSubmitting=(cov_2py6695m2f().s[16]++,false);async function addComment(postId){cov_2py6695m2f().f[3]++;// if (isSubmitting) return; // Prevent multiple submissions
// isSubmitting = true;
const commentInput=(cov_2py6695m2f().s[17]++,document.getElementById("comment-input"));const commentText=(cov_2py6695m2f().s[18]++,commentInput.value.trim());const addCommentBtn=(cov_2py6695m2f().s[19]++,document.getElementById("add-comment-btn"));const MIN_COMMENT_LENGTH=(cov_2py6695m2f().s[20]++,5);// Validate input on the frontend
cov_2py6695m2f().s[21]++;if(commentText===""){cov_2py6695m2f().b[2][0]++;cov_2py6695m2f().s[22]++;alert("Comment cannot be empty!");// isSubmitting = false;
cov_2py6695m2f().s[23]++;return;}else{cov_2py6695m2f().b[2][1]++;}cov_2py6695m2f().s[24]++;if(commentText.length<MIN_COMMENT_LENGTH){cov_2py6695m2f().b[3][0]++;cov_2py6695m2f().s[25]++;alert(`Comment must be at least ${MIN_COMMENT_LENGTH} characters long!`);// isSubmitting = false;
cov_2py6695m2f().s[26]++;return;}else{cov_2py6695m2f().b[3][1]++;}// addCommentBtn.disabled = true; // Disable button during submission
cov_2py6695m2f().s[27]++;try{const response=(cov_2py6695m2f().s[28]++,await fetch(`/add-comment/${postId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:commentText})}));// Handle backend errors
// if (!response.ok) {
//     const result = await response.json();
//     if (result.message) {
//         alert(result.message); // Display the backend's error message
//     } else {
//         throw new Error("Failed to add comment");
//     }
//     return;
// }
// If successful, reload comments and clear input
cov_2py6695m2f().s[29]++;commentInput.value="";cov_2py6695m2f().s[30]++;await loadComments(postId);cov_2py6695m2f().s[31]++;document.getElementById("comments-container").lastElementChild.scrollIntoView({behavior:"smooth"});}catch(error){cov_2py6695m2f().s[32]++;console.error("Error adding comment:",error);// displayErrorMessage("Failed to add comment.");
}finally{// addCommentBtn.disabled = false; // Re-enable button
// isSubmitting = false;
}}// Initialize post details and comments on page load
// document.addEventListener("DOMContentLoaded", () => {
//     const postId = new URLSearchParams(window.location.search).get("id");
//     if (postId) {
//         loadPostDetails(postId);
//         document
//             .getElementById("add-comment-btn")
//             .addEventListener("click", () => addComment(postId));
//     } 
//     // else {
//     //     displayErrorMessage("Post ID is missing in the URL.");
//     // }
// });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMnB5NjY5NW0yZiIsImFjdHVhbENvdmVyYWdlIiwidG9nZ2xlU3Bpbm5lciIsInNob3ciLCJmIiwic3Bpbm5lciIsInMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYiIsInN0eWxlIiwiZGlzcGxheSIsImxvYWRDb21tZW50cyIsInBvc3RJZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJjb21tZW50cyIsImpzb24iLCJjb21tZW50c0NvbnRhaW5lciIsImlubmVySFRNTCIsImZvckVhY2giLCJjb21tZW50IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29tbWVudERpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInRleHQiLCJ0b0xvY2FsZVN0cmluZyIsImFwcGVuZENoaWxkIiwiZXJyb3IiLCJjb25zb2xlIiwiZGlzcGxheUVycm9yTWVzc2FnZSIsImlzU3VibWl0dGluZyIsImFkZENvbW1lbnQiLCJjb21tZW50SW5wdXQiLCJjb21tZW50VGV4dCIsInZhbHVlIiwidHJpbSIsImFkZENvbW1lbnRCdG4iLCJNSU5fQ09NTUVOVF9MRU5HVEgiLCJhbGVydCIsImxlbmd0aCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxhc3RFbGVtZW50Q2hpbGQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIl0sInNvdXJjZXMiOlsiY29tbWVudERpc3BsYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVG9nZ2xlIHNwaW5uZXIgdmlzaWJpbGl0eVxyXG5mdW5jdGlvbiB0b2dnbGVTcGlubmVyKHNob3cpIHtcclxuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmctc3Bpbm5lclwiKTtcclxuICAgIGlmIChzcGlubmVyKSB7XHJcbiAgICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gICAgfSBcclxuICAgIC8vIGVsc2Uge1xyXG4gICAgLy8gICAgIGNvbnNvbGUud2FybihcIlNwaW5uZXIgZWxlbWVudCBub3QgZm91bmQgaW4gdGhlIERPTS5cIik7XHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbi8vIERpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZSBpbiB0aGUgVUlcclxuLy8gZnVuY3Rpb24gZGlzcGxheUVycm9yTWVzc2FnZShtZXNzYWdlKSB7XHJcbi8vICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVycm9yLW1lc3NhZ2VcIik7XHJcbi8vICAgICBpZiAoIWVycm9yTWVzc2FnZSkge1xyXG4vLyAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBtZXNzYWdlIGVsZW1lbnQgbm90IGZvdW5kIGluIHRoZSBET00uXCIpO1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuLy8gICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbi8vICAgICBlcnJvck1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4vLyAgICAgICAgIGVycm9yTWVzc2FnZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vICAgICB9LCA1MDAwKTtcclxuLy8gfVxyXG5cclxuLy9GZXRjaCBhbmQgZGlzcGxheSBwb3N0IGRldGFpbHNcclxuLy8gYXN5bmMgZnVuY3Rpb24gbG9hZFBvc3REZXRhaWxzKHBvc3RJZCkge1xyXG4vLyAgICAgdG9nZ2xlU3Bpbm5lcih0cnVlKTtcclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2dldC1wb3N0LyR7cG9zdElkfWApO1xyXG4vLyAgICAgICAgIC8vIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIHBvc3RcIik7XHJcblxyXG4vLyAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zdC10aXRsZVwiKS50ZXh0Q29udGVudCA9IHBvc3QucmVzdGF1cmFudE5hbWU7XHJcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3N0LWxvY2F0aW9uXCIpLnRleHRDb250ZW50ID0gYExvY2F0aW9uOiAke3Bvc3QubG9jYXRpb259YDtcclxuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc3QtY29udGVudFwiKS50ZXh0Q29udGVudCA9IHBvc3QuY29udGVudDtcclxuXHJcbi8vICAgICAgICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3N0LWltYWdlXCIpO1xyXG4vLyAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSAgXCJpbWFnZXMvTm9JbWFnLmpwZ1wiO1xyXG4vLyAgICAgICAgIGlmIChwb3N0LmltYWdlVXJsKSBpbWFnZUVsZW1lbnQuc3JjID0gcG9zdC5pbWFnZVVybCBcclxuLy8gICAgICAgICAvLyBpbWFnZUVsZW1lbnQub25lcnJvciA9ICgpID0+IHtcclxuLy8gICAgICAgICAvLyAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IFwiaW1hZ2VzL05vSW1hZ2UuanBnXCI7XHJcbi8vICAgICAgICAgLy8gfTtcclxuXHJcbi8vICAgICAgICAgYXdhaXQgbG9hZENvbW1lbnRzKHBvc3RJZCk7XHJcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgICAgIC8vY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgcG9zdCBkZXRhaWxzOlwiLCBlcnJvcik7XHJcbi8vICAgICAgICAgLy9kaXNwbGF5RXJyb3JNZXNzYWdlKFwiRmFpbGVkIHRvIGxvYWQgcG9zdCBkZXRhaWxzLlwiKTtcclxuLy8gICAgIH0gZmluYWxseSB7XHJcbi8vICAgICAgICAgdG9nZ2xlU3Bpbm5lcihmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vIH1cclxuXHJcbi8vIExvYWQgY29tbWVudHMgZm9yIGEgcG9zdFxyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ29tbWVudHMocG9zdElkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9nZXQtY29tbWVudHMvJHtwb3N0SWR9YCk7XHJcbiAgICAgICAgLy8gaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgY29tbWVudHNcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21tZW50cy1jb250YWluZXJcIik7XHJcbiAgICAgICAgY29tbWVudHNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gQ2xlYXIgcHJldmlvdXMgY29tbWVudHNcclxuXHJcbiAgICAgICAgY29tbWVudHMuZm9yRWFjaCgoY29tbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBpZiAoIWNvbW1lbnQudGV4dCkgY29tbWVudC50ZXh0ID0gXCJbTm8gY29tbWVudCBwcm92aWRlZF1cIjtcclxuICAgICAgICAgICAgY29tbWVudC50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb21tZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgY29tbWVudERpdi5jbGFzc0xpc3QuYWRkKFwiY29tbWVudFwiKTtcclxuICAgICAgICAgICAgY29tbWVudERpdi50ZXh0Q29udGVudCA9IGAke2NvbW1lbnQudGV4dH0gKFBvc3RlZCBvbjogJHtuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQudGltZXN0YW1wXHJcbiAgICAgICAgICAgICkudG9Mb2NhbGVTdHJpbmcoKX0pYDtcclxuICAgICAgICAgICAgY29tbWVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoY29tbWVudERpdik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGNvbW1lbnRzOlwiLCBlcnJvcik7XHJcbiAgICAgICAgZGlzcGxheUVycm9yTWVzc2FnZShcIkZhaWxlZCB0byBsb2FkIGNvbW1lbnRzLlwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQWRkIGEgbmV3IGNvbW1lbnRcclxubGV0IGlzU3VibWl0dGluZyA9IGZhbHNlO1xyXG5hc3luYyBmdW5jdGlvbiBhZGRDb21tZW50KHBvc3RJZCkge1xyXG4gICAgLy8gaWYgKGlzU3VibWl0dGluZykgcmV0dXJuOyAvLyBQcmV2ZW50IG11bHRpcGxlIHN1Ym1pc3Npb25zXHJcbiAgICAvLyBpc1N1Ym1pdHRpbmcgPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0IGNvbW1lbnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tbWVudC1pbnB1dFwiKTtcclxuICAgIGNvbnN0IGNvbW1lbnRUZXh0ID0gY29tbWVudElucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgIGNvbnN0IGFkZENvbW1lbnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1jb21tZW50LWJ0blwiKTtcclxuXHJcbiAgICBjb25zdCBNSU5fQ09NTUVOVF9MRU5HVEggPSA1O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGlucHV0IG9uIHRoZSBmcm9udGVuZFxyXG4gICAgaWYgKGNvbW1lbnRUZXh0ID09PSBcIlwiKSB7XHJcbiAgICAgICAgYWxlcnQoXCJDb21tZW50IGNhbm5vdCBiZSBlbXB0eSFcIik7XHJcbiAgICAgICAgLy8gaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbW1lbnRUZXh0Lmxlbmd0aCA8IE1JTl9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICAgIGFsZXJ0KGBDb21tZW50IG11c3QgYmUgYXQgbGVhc3QgJHtNSU5fQ09NTUVOVF9MRU5HVEh9IGNoYXJhY3RlcnMgbG9uZyFgKTtcclxuICAgICAgICAvLyBpc1N1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWRkQ29tbWVudEJ0bi5kaXNhYmxlZCA9IHRydWU7IC8vIERpc2FibGUgYnV0dG9uIGR1cmluZyBzdWJtaXNzaW9uXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hZGQtY29tbWVudC8ke3Bvc3RJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0ZXh0OiBjb21tZW50VGV4dCB9KSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGJhY2tlbmQgZXJyb3JzXHJcbiAgICAgICAgLy8gaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIC8vICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgLy8gICAgIGlmIChyZXN1bHQubWVzc2FnZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgYWxlcnQocmVzdWx0Lm1lc3NhZ2UpOyAvLyBEaXNwbGF5IHRoZSBiYWNrZW5kJ3MgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGFkZCBjb21tZW50XCIpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIElmIHN1Y2Nlc3NmdWwsIHJlbG9hZCBjb21tZW50cyBhbmQgY2xlYXIgaW5wdXRcclxuICAgICAgICBjb21tZW50SW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGF3YWl0IGxvYWRDb21tZW50cyhwb3N0SWQpO1xyXG4gICAgICAgIGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcImNvbW1lbnRzLWNvbnRhaW5lclwiKVxyXG4gICAgICAgICAgICAubGFzdEVsZW1lbnRDaGlsZC5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhZGRpbmcgY29tbWVudDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIC8vIGRpc3BsYXlFcnJvck1lc3NhZ2UoXCJGYWlsZWQgdG8gYWRkIGNvbW1lbnQuXCIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAvLyBhZGRDb21tZW50QnRuLmRpc2FibGVkID0gZmFsc2U7IC8vIFJlLWVuYWJsZSBidXR0b25cclxuICAgICAgICAvLyBpc1N1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBwb3N0IGRldGFpbHMgYW5kIGNvbW1lbnRzIG9uIHBhZ2UgbG9hZFxyXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbi8vICAgICBjb25zdCBwb3N0SWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldChcImlkXCIpO1xyXG4vLyAgICAgaWYgKHBvc3RJZCkge1xyXG4vLyAgICAgICAgIGxvYWRQb3N0RGV0YWlscyhwb3N0SWQpO1xyXG4vLyAgICAgICAgIGRvY3VtZW50XHJcbi8vICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcImFkZC1jb21tZW50LWJ0blwiKVxyXG4vLyAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZENvbW1lbnQocG9zdElkKSk7XHJcbi8vICAgICB9IFxyXG4vLyAgICAgLy8gZWxzZSB7XHJcbi8vICAgICAvLyAgICAgZGlzcGxheUVycm9yTWVzc2FnZShcIlBvc3QgSUQgaXMgbWlzc2luZyBpbiB0aGUgVVJMLlwiKTtcclxuLy8gICAgIC8vIH1cclxuLy8gfSk7Il0sIm1hcHBpbmdzIjoicW9JQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaO0FBQ0EsUUFBUyxDQUFBRSxhQUFhQSxDQUFDQyxJQUFJLENBQUUsQ0FBQUgsY0FBQSxHQUFBSSxDQUFBLE1BQ3pCLEtBQU0sQ0FBQUMsT0FBTyxFQUFBTCxjQUFBLEdBQUFNLENBQUEsTUFBR0MsUUFBUSxDQUFDQyxjQUFjLENBQUMsaUJBQWlCLENBQUMsRUFBQ1IsY0FBQSxHQUFBTSxDQUFBLE1BQzNELEdBQUlELE9BQU8sQ0FBRSxDQUFBTCxjQUFBLEdBQUFTLENBQUEsU0FBQVQsY0FBQSxHQUFBTSxDQUFBLE1BQ1RELE9BQU8sQ0FBQ0ssS0FBSyxDQUFDQyxPQUFPLENBQUdSLElBQUksRUFBQUgsY0FBQSxHQUFBUyxDQUFBLFNBQUcsT0FBTyxHQUFBVCxjQUFBLEdBQUFTLENBQUEsU0FBRyxNQUFNLEVBQ25ELENBQUMsS0FBQVQsY0FBQSxHQUFBUyxDQUFBLFVBQ0Q7QUFDQTtBQUNBO0FBQ0osQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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